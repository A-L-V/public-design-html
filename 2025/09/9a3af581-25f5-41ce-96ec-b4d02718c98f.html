<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tulip치n</title>
  <style>
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: url('https://i.pinimg.com/1200x/85/5d/69/855d69beafc8e22fbfff9c123e761577.jpg') no-repeat center center fixed;
      background-size: cover;
      flex-direction: column;
      overflow: hidden;
    }

    .flower__wrapper {
      position: relative;
      width: 50vh;
      height: 55vh;
      display: flex;
      justify-content: center;
      align-items: flex-end;
    }

    /* --- C칰pula de vidrio --- */
    .cupula {
      position: absolute;
      bottom: 0;
      width: 100%;
      height: 100%;
      border-radius: 50% 50% 0 0;
      background: rgba(120, 120, 120, 0.22);
      box-shadow: 0 0 32px 8px rgba(120, 120, 120, 0.18);
      overflow: hidden;
      transition: transform 1.5s ease, opacity 1.5s ease;
      cursor: pointer;
      z-index: 2;
    }

    .cupula.levantar {
      transform: translateY(-120%) scale(0.9) rotateX(45deg);
      opacity: 0;
    }

    .cupula:before {
      content: '';
      position: absolute;
      top: 4%;
      left: 4%;
      width: 92%;
      height: 96%;
      background: radial-gradient(circle at top left, rgba(120, 120, 120, 0.18) 0%, transparent 100%);
      border-radius: 50% 50% 0 0;
    }

    .cupula:after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at top left, rgba(120, 120, 120, 0.18) 0%, transparent 100%);
    }

    /* Flor */
    .flower {
      display: flex;
      flex-direction: column-reverse;
      align-items: center;
      animation: float 3s ease-in-out infinite;
      position: relative;
      z-index: 1;
    }

    .imagen {
      height: 49vh;
      width: 49vh;
      object-fit: contain;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-15px); }
    }

    /* Part칤culas */
    .particles {
      position: absolute;
      bottom: 0;
      left: 50%;
      width: 100%;
      height: 100%;
      pointer-events: none;
      overflow: visible;
      z-index: 0;
    }

    .particle {
      position: absolute;
      bottom: 0;
      width: 8px;
      height: 8px;
      background: radial-gradient(circle, #FFD700, #FFA500);
      border-radius: 50%;
      opacity: 0.9;
      animation: polen 4.2s linear forwards;
    }

    @keyframes polen {
      0% {
        transform: translate(0, 0) scale(1);
        opacity: 1;
      }
      80% {
        opacity: 0.7;
      }
      100% {
        transform: translate(var(--x), var(--y)) scale(0.7);
        opacity: 0;
      }
    }

    .titulo {
      margin-bottom: 20px;
      color: #111;
      font-size: 2em;
      text-align: center;
      animation: fadeIn 4s ease-in-out forwards;
      opacity: 0;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
  </style>
</head>

<body>
  <h1 class="titulo"> Te regalo este tulip치n 游꺙 <br>
    para recordarte que siempre ser치s mi primavera </h1>

  <div class="flower__wrapper">
    <!-- Flor (quieta) -->
    <div class="flower">
      <img class="imagen"
        src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/75/Tulip_-_floriade_canberra.jpg/640px-Tulip_-_floriade_canberra.jpg" />
    </div>

    <!-- C칰pula de vidrio (se levanta) -->
    <div class="cupula" id="cupula"></div>

    <!-- Contenedor de part칤culas -->
    <div class="particles" id="particles"></div>
  </div>

  <script>
    const cupula = document.getElementById("cupula");
    const particlesContainer = document.getElementById("particles");

    let polenActivo = false;

    cupula.addEventListener("click", () => {
      cupula.classList.add("levantar");
      if (!polenActivo) {
        polenActivo = true;
        iniciarPolen();
      }
    });

    function iniciarPolen() {
      setInterval(() => {
        crearParticulaPolenDesdePetalo(-0.3); // izquierda
        crearParticulaPolenDesdePetalo(0.3);  // derecha
      }, 50);
    }

    function crearParticulaPolenDesdePetalo(desviacionX) {
      const p = document.createElement("div");
      p.className = "particle";

      const flor = document.querySelector('.imagen');
      const wrapper = document.querySelector('.flower__wrapper');
      const florRect = flor.getBoundingClientRect();
      const wrapperRect = wrapper.getBoundingClientRect();

      // Posici칩n base: centro inferior de la flor
      let xFlor = florRect.left + florRect.width / 2 - wrapperRect.left;
      let yFlor = florRect.bottom - wrapperRect.top - 10;

      // Ajuste seg칰n desviaci칩n (izq/derecha)
      xFlor += desviacionX * florRect.width;

      p.style.left = xFlor + "px";
      p.style.bottom = (wrapperRect.height - yFlor) + "px";

      const angulo = Math.random() * Math.PI * 0.7 - Math.PI * 0.35;
      const distancia = 200 + Math.random() * 400;
      const x = Math.cos(angulo) * distancia + "px";
      const y = -60 - Math.random() * 300 + "px";

      p.style.setProperty("--x", x);
      p.style.setProperty("--y", y);

      particlesContainer.appendChild(p);
      setTimeout(() => p.remove(), 4200);
    }
  </script>
</body>

</html>
